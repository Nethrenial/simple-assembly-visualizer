import{d,t as b,o as c,c as v,a as n,b as g,u as i,F as h,w as B,r as _,n as R,e as O,p as k,f as w,g as A,h as T,i as M,j as x,k as z,l as K}from"./vendor.ccc01e4f.js";const W=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const o of u.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerpolicy&&(u.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?u.credentials="include":l.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=e(l);fetch(l.href,u)}};W();var f=(a,r)=>{for(const[e,s]of r)a[e]=s;return a};const Z={for:"asm-file-input"},G=["value"],H=d({props:{isFileUploaded:{type:Boolean,required:!0},fileName:{type:String,required:!0}},emits:["asmFileSelected"],setup(a,{emit:r}){const e=a,{isFileUploaded:s,fileName:l}=b(e),u=o=>{r("asmFileSelected",o)};return(o,N)=>(c(),v(h,null,[n("label",Z,g(i(s)?"Uploaded":"Upload"),1),n("input",{type:"file",id:"asm-file-input",name:"asm-file-input",value:i(l).length===0?i(l):void 0,onChange:u},null,40,G)],64))}});var J=f(H,[["__scopeId","data-v-5949f508"]]);const Q={};function X(a,r){return c(),v("button",null,"Reset")}var Y=f(Q,[["render",X],["__scopeId","data-v-d747ad50"]]);const ee={class:"name"},te={class:"value"},se=d({props:{regName:{type:String,required:!0},regValue:{type:String,required:!0}},setup(a){const r=a,{regName:e,regValue:s}=b(r);B(s,(u,o)=>{u!==o&&(l.value=!0),setTimeout(()=>{l.value=!1},500)});const l=_(!1);return(u,o)=>(c(),v("div",{class:"register",style:R({backgroundColor:l.value?"red":"#333"})},[n("div",ee,g(i(e)),1),n("div",te,g(i(s)),1)],4))}});var ae=f(se,[["__scopeId","data-v-0f7bed93"]]);const ue=a=>(k("data-v-0d564174"),a=a(),w(),a),le=ue(()=>n("h2",null,"Registers",-1)),re={class:"registers"},oe=d({props:{reg:{type:Object,required:!0}},setup(a){const r=a,{reg:e}=b(r);return(s,l)=>(c(),v(h,null,[le,n("div",re,[(c(!0),v(h,null,O(i(e),(u,o)=>(c(),A(ae,{key:o,"reg-name":o.toString(),"reg-value":u.toString()},null,8,["reg-name","reg-value"]))),128))])],64))}});var ne=f(oe,[["__scopeId","data-v-0d564174"]]);const ce={class:"index"},ie={class:"value"},ve=d({props:{index:{type:Number,required:!0},value:{type:Number,required:!0}},setup(a){const r=a,{index:e,value:s}=b(r);B(s,(u,o)=>{u!==o&&(l.value=!0),setTimeout(()=>{l.value=!1},500)});const l=_(!1);return(u,o)=>(c(),v("div",{class:"mem-block",style:R({backgroundColor:l.value?"red":"#333"})},[n("div",ce,g(i(e)),1),n("div",ie,g(i(s)),1)],4))}});var pe=f(ve,[["__scopeId","data-v-65765ef4"]]);const _e=a=>(k("data-v-201e478c"),a=a(),w(),a),de=_e(()=>n("h2",null,"Memory",-1)),fe={class:"memory"},me=d({props:{store:{type:Object,required:!0}},setup(a){const r=a,{store:e}=b(r);return(s,l)=>(c(),v(h,null,[de,n("div",fe,[(c(!0),v(h,null,O(i(e),(u,o)=>(c(),A(pe,{class:T(typeof u=="number"?"":"hidden"),index:o,value:typeof u=="number"?u:0},null,8,["class","index","value"]))),256))])],64))}});var ge=f(me,[["__scopeId","data-v-201e478c"]]);const he=["disabled"],ye=d({props:{isDisabled:{type:Boolean,required:!0}},setup(a){return(r,e)=>(c(),v("button",{disabled:a.isDisabled},"Next",8,he))}});var be=f(ye,[["__scopeId","data-v-749832a1"]]);const xe=["disabled"],Ne=d({props:{isDisabled:{type:Boolean,required:!0}},setup(a){return(r,e)=>(c(),v("button",{disabled:a.isDisabled},"Prev",8,xe))}});var Ie=f(Ne,[["__scopeId","data-v-2280095e"]]);const $e={class:"output"},Se=d({props:{index:{type:Number,required:!0},outputValue:{type:Number,required:!0}},setup(a){const r=a,{outputValue:e}=b(r);return(s,l)=>(c(),v("div",$e,g(a.index+1)+" : "+g(i(e)),1))}});var Fe=f(Se,[["__scopeId","data-v-b1114eb2"]]);const je=a=>(k("data-v-68ab4cfe"),a=a(),w(),a),qe=je(()=>n("h2",null,"Outputs",-1)),Ce={class:"outputs"},Oe=d({props:{outputs:{type:Object,required:!0}},setup(a){const r=a,{outputs:e}=b(r);return(s,l)=>(c(),v(h,null,[qe,n("div",Ce,[(c(!0),v(h,null,O(i(e).outputs,(u,o)=>(c(),A(Fe,{key:o,index:o,"output-value":u},null,8,["index","output-value"]))),128))])],64))}});var ke=f(Oe,[["__scopeId","data-v-68ab4cfe"]]);const we={class:"input-and-reset"},Ae={class:"buttons"},Be={class:"instruction"},Re={class:"container"},Me={class:"registers-container"},Pe={class:"memory-container"},Ve={class:"outputs-container"},Ee=n("footer",null,"Made with \u{1F497} by Nethrenial",-1),De=d({setup(a){const r=100;let e=_(new Proxy({a:0,b:0,c:0,d:0,e:0,f:0,sp:0,acc:0,pc:0,ivec:0,int:0,timer:0,halt:!1},{set:(t,p,m)=>(t[p]=m,!0)})),s=_({store:new Array(r).fill(0)});const l={mov:t=>{e.value[t[0]]=e.value[t[1]],e.value.pc=e.value.pc+1},movv:t=>{e.value[t[0]]=Number.parseInt(t[1]),e.value.pc=e.value.pc+1},load:t=>{e.value[t[0]]=s.value.store[Number.parseInt(t[1])],e.value.pc=e.value.pc+1},loadr:t=>{e.value[t[0]]=s.value.store[e.value[t[1]]],e.value.pc=e.value.pc+1},store:t=>{s.value.store[Number.parseInt(t[0])]=e.value[t[1]],e.value.pc=e.value.pc+1},storer:t=>{s.value.store[e.value[t[0]]]=e.value[t[1]],e.value.pc=e.value.pc+1},add:t=>{e.value.acc=e.value[t[0]]+e.value[t[1]],e.value.pc=e.value.pc+1},sub:t=>{e.value.acc=e.value[t[0]]-e.value[t[1]],e.value.pc=e.value.pc+1},mod:t=>{e.value.acc=e.value[t[0]]%e.value[t[1]],e.value.pc=e.value.pc+1},call:t=>{e.value.sp=e.value.sp+1,s.value.store[e.value.sp]=e.value.pc+1,e.value.pc=Number.parseInt(t[0])},ret:()=>{e.value.pc=s.value.store[e.value.sp],e.value.sp=e.value.sp-1},out:t=>{console.log(e.value[t[0]]),j.value.outputs.push(e.value[t[0]]),e.value.pc=e.value.pc+1},push:t=>{e.value.sp=e.value.sp+1,s.value.store[e.value.sp]=e.value[t[0]],e.value.pc=e.value.pc+1},pop:t=>{e.value[t[0]]=s.value.store[e.value.sp],e.value.sp=e.value.sp-1,e.value.pc=e.value.pc+1},jmp:t=>{e.value.pc=Number.parseInt(t[0])},jnz:t=>{e.value[t[1]]!==0?e.value.pc=Number.parseInt(t[0]):e.value.pc=e.value.pc+1},halt:()=>{e.value.halt=!0,e.value.pc=e.value.pc+1}},u=_(!1),o=_("");let N=null,$=[],S=_("");const I=_([]),y=_(!1),F=_(!0),P=M(()=>!!(y.value||!u.value)),V=M(()=>!!(F.value||!u.value)),E=()=>{if($.length===0||!N)console.log("Not any instructions");else if(!e.value.halt&&!y.value){F.value=!1,I.value.push({memoryState:Object.assign({},s.value),registersState:Object.assign({},e.value)});let t=e.value.pc;l[s.value.store[t][0]](s.value.store[t].slice(1)),e.value.timer=e.value.timer-1,e.value.int===1&&e.value.timer===0&&(e.value.sp=e.value.sp+1,s.value.store[e.value.sp]=e.value.pc,e.value.pc=e.value.ivec,e.value.int=0),console.log(s.value.store[e.value.pc]);const m=s.value.store[e.value.pc];m?S.value=m.join(" "):y.value=!0}},D=()=>{if($.length===0||!N)console.log("Not any instructions");else if(I.value.length>0){console.log(I.value.length),y.value=!1;const t=I.value.pop();e.value=t.registersState,s.value=t.memoryState,S.value=s.value.store[e.value.pc].join(" ");let p=e.value.pc;l[s.value.store[p][0]](s.value.store[p].slice(1)),e.value.timer=e.value.timer-1,e.value.int===1&&e.value.timer===0&&(e.value.sp=e.value.sp+1,s.value.store[e.value.sp]=e.value.pc,e.value.pc=e.value.ivec,e.value.int=0)}},L=t=>{var p;((p=t.target.files)==null?void 0:p.length)!=0&&(u.value=!0,N=new FileReader,N.onload=m=>{$=m.target.result.split(`
`);for(const q of $){if(q.startsWith("#")||q==="")continue;const C=q.split(" ");C.length>0&&(s.value.store[Number.parseInt(C[0])]=C.slice(1))}S.value=s.value.store[e.value.pc].join(" ")},o.value=t.target.files[0].name,N.readAsText(t.target.files[0]))},j=_({outputs:[]}),U=()=>{e.value=new Proxy({a:0,b:0,c:0,d:0,e:0,f:0,sp:0,acc:0,pc:0,ivec:0,int:0,timer:0,halt:!1},{set:(t,p,m)=>(t[p]=m,!0)}),s.value.store=new Array(r).fill(0),u.value=!1,y.value=!1,F.value=!0,I.value=[],j.value={outputs:[]}};return(t,p)=>(c(),v(h,null,[n("div",we,[n("div",Ae,[x(J,{onAsmFileSelected:L,"is-file-uploaded":u.value,"file-name":o.value},null,8,["is-file-uploaded","file-name"]),x(Y,{onClick:U}),x(Ie,{onClick:D,"is-disabled":i(V)},null,8,["is-disabled"]),x(be,{onClick:E,"is-disabled":i(P)},null,8,["is-disabled"])]),n("div",Be,[n("strong",null,g(u.value?y.value?"All instructions executed":"Next Instruction":"File unavailable !"),1),z(" "+g(u.value?y.value?"":" : "+i(S):""),1)])]),n("div",Re,[n("div",Me,[x(ne,{reg:i(e)},null,8,["reg"])]),n("div",Pe,[x(ge,{store:i(s).store},null,8,["store"])]),n("div",Ve,[x(ke,{outputs:j.value},null,8,["outputs"])])]),Ee],64))}});K(De).mount("#app");
